---
layout: post
title:  "AWS RDS mysql - 다른 리전에 읽기복제본 생성: 버전이슈"
date:   2018-09-28
categories: AWS RDS mysql 
---

![그림0](/images/lightsail.jpeg)

# Lightsail VS EC2 


## Amazon Lightsail? 

Lightsail 이라는 서비스가 나온지는 좀 되었다. 간단하게 소개하면 **아마존에서 제공하는 웹 호스팅 서비스** 이다. 기본적인 컨셉 자체는 AWS라는 복잡하고 어려운 클라우드 어쩌구를 몰라도 웹호스팅을 다른 업체만큼 싸게 제공해주는 데 목적이 있는 듯하다. 영세한 웹호스팅업계에 AWS라는 공룡이 침입한 게 아닌가 싶다. Digital Oceans 같은 호스팅업체와 제공하는 서비스와 심지어 UI까지 비슷하다. Digital Oceans는 점점 클라우드 업체처럼 되어가고 있고 아마존은 호스팅 업계의 영역까지 군침을 흘리고 있는 모양새다. 

어쨌든 Lightsail은 그저 '아마존의 웹호스팅 서비스'라는 것이 중요하다. 

그런데, AWS를 사용하고 있는 사람 입장에서는 그럼 AWS에서 EC2를 사용하는것과 Lightsail에서 사용하는 것과 뭐가 다른지가 궁금하다. 간단하게 그 차이점을 정리해보려고 한다. 

## Lightsail VS EC2 

어차피 요금과 기능이 제일 중요하다. 두 가지만 살펴보자. 

* 요금 
* 기능 

### 요금 

왠만한 조건에서는 Lightsail이 더 싸다. 

Lightsail은 2GB 메모리, 즉 T2.small 기준으로 $10의 요금을 받는다. 여기에는 60GB의 SSD EBS 볼륨도 포함되어 있고 심지어, 트래픽 요금까지 포함되어있다. 

EC2에서 t2.small을 3년 약정으로 잡고 (no-upfront), 60gb EBS를 잡으면 $12.62 가 나온다. 물론 여기에 트래픽비용은 별도다. 

그러니 **한달 내내 사용할거면 무조건 Lightsail이 싸다.** (한달 내내 사용하는거니 스팟은 고려하지 않는다.)

그러나, 한달 내내 사용하는게 아니라면? 

그럼 얘기가 달라진다. 일단, Lightsail은 월별 과금이다. 즉, 한번키면 ec2 처럼 stop-start가 안된다. ec2에서 자랑하는 초당 과금 뭐 그런거 없다. 그냥 월에 $10씩 꼬박꼬박 내면된다. 즉, ec2를 딱 필요한 시간에만 쓴다면 ec2가 훨씬 적게 나올 가능성이 있다는 말이다. 관리를 잘해주면 ec2는 사용한 만큼만 과금이 되니 굉장히 적은 비용으로 운용이 가능하다. 

~~그러나 매번 껐다 키기는 귀찮다. 이거 잘 지키는 팀 잘 못봤다. (스크립트로 짜놓지 않는이상. )~~ 

### 기능 

먼저 EC2에선 되지만 Lightsail에서 안되는 기능들은 대략 다음과 같다. 

* vpc관련 기능이 제한적
* 인스턴스 타입 변경 
* 정기적인 스냅샷 생성 
* 디테일한 보안그룹설정 
* IAM role 부여
* 여러 로드밸런서 옵션 (예: NLB)

등 뭔가 디테일하고 딥한 옵션은 제공하지 않는다. 대신 일반적인 웹호스팅에서 제공하는 기능들은 대부분 제공한다. 

또한 Lightsail에서 특별히 제공해주는 기능도 있다. 

* 웹 SSH 콘솔
* VPC Peering 

웹 콘솔은 디지털 오션같은데에서 기본으로 제공해주는 서비스라 AWS에서도 그냥 제공해주는 것 같다. EC2에서 비슷한 기능을 이용하려면 꽤나 복잡한 과정을 거쳐야한다.

거기에 내 생각에 매력인 옵션은 바로 'VPC peering' 기능이다. Lightsail에서 인스턴스를 생성하면 그게 어떤 VPC에 생기는지 알수 없다. 그렇지만, Lightsail에서는 내 VPC와 Peering할수 있는 기능을 제공한다. 이 기능 덕분에 Lightsail의 활용성이 엄청 높아지는 것 같다. 



## 사설 및 정리

사실 이번에 개인적으로 Jira를 사용하려고 작은 EC2를 하나 띄워놨다. 근데 이게 아무리 생각해도 비용적으로 비효율적인게 t2.medium을 띄워놨는데 이게 한달에 거의 4만원 돈이다. 이럴 거면 그냥 jira cloud를 이용하는게 낫다. 이것보다 더 저렴한 옵션은 없나 찾아보던 중에 Lightsail을 발견했다. 구축한 Jira를 옮기는게 귀찮아서 지금 당장 Lightsail을 쓰진 않겠지만 다른 프로젝트를 할때는 충분히 고려할 만한 옵션인 듯 하다. 

단독으로 웹서버를 띄우는 등의 간단하고 작은 규모의 서비스에게 Lightsail은 굉장히 매력적인 옵션으로 보인다. 가격이 거의 절반 가격이고, 매달 일정한 금액이 나오기 때문에 비용관리 측면에서도 유리하다. 트래픽도 기본 1TB씩 제공하기 때문에 크게 부족할 일이 없을 것 같다. DB 등 중요한 인프라는 기존 AWS 서비스를 사용해서 관리하고 이에 대한 연결은 Lightsail과 VPC Peering을 이용해서 가능하다. 뭔가 엄청난 트래픽이 예상되는 서비스만 아니면 왠만한 서비스에서 모두 고려할 만 하다. 

물론 안정적인 서비스를 원하는 팀에게는 추천하기 애매하다. 일단 SLA를 제공하지 않고, t2타입의 특성상 장애가 발생할 가능성이 있다. 또한 VPC 관리 등이 되지 않기 때문에 뭔가 불투명하고 막연하다. 웹호스팅에 익숙한 업체들이야 상관 없겠지만, 아닌 경우 뭔가 보안에 취약해보이고, 허접한 서비스 같아보인다. $10~$20 가 중요하지 않은 업체는 그냥, m5.large를 multi-az 구성해서 튼튼하게 가는게 여러가지로 낫다. 

즉, 만원 이만원이 중요하고, 매달 일정한(그리고 아주 작은) 요금이 나오길 바라는 팀, 예를들어 스타트업은 Lightsail을 적극 고려하시길. 또한 개인 웹사이트 등을 고려하는데 뭔가 AWS를 사용해보고 싶다면, 사용해볼만하다. 다른 호스팅업체보다는 약간 비싸지만 무지막지하게 비싼 가격은 아니라고 생각하고, 다른 클라우드에 비하면 싸다. 

끝.